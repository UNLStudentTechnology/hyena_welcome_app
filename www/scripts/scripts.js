"use strict";angular.module("hyenaWelcomeApp",["ionic","ngCordova","hyenaAngular","angularMoment"]).run(["$ionicPlatform",function(a){a.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleLightContent()})}]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("tab",{url:"/tab","abstract":!0,templateUrl:"templates/tabs.html",data:{requireAuth:!1},controller:"MainCtrl"}).state("tab.main",{url:"/main",views:{"tab-main":{templateUrl:"templates/tab-main.html"}}}).state("tab.account",{url:"/account",views:{"tab-account":{templateUrl:"templates/tab-account.html"}}}),b.otherwise("/tab/main")}]).config(["$httpProvider",function(a){a.interceptors.push(["$injector",function(a){return a.get("AuthInterceptor")}])}]).constant("FBURL","https://hyena-welcome.firebaseio.com/").constant("APIKEY","OTA2MmRmMDlmZGFmNWY1MTcwMmVhZDVk").constant("APIPATH","http://st-studio.unl.edu/hyena_platform/public/api/1.0/").constant("PLATFORM_ROOT","http://st-studio.unl.edu/hyena_platform/public/").constant("AUTH_SCOPE","groups"),angular.module("hyenaWelcomeApp").controller("MainCtrl",["$scope","$ionicModal","$timeout","$cordovaLocalNotification","$cordovaStatusbar","ActivityService","AuthService","ngEstimote","UserService",function(a,b,c,d,e,f,g,h,i){a.activities=null,a.user=null,a.activityModal=null,a.pendingAction=!1,i.get("hgascoigne2").then(function(b){a.currentUser=b.data}),c(function(){a.pendingAction=!0,a.showActivityModal()},3e3),a.$watch("currentUser",function(a,b){});var j=f.user("hgascoigne2").$asObject();j.$bindTo(a,"user"),a.activities=f.userActivities("hgascoigne2").$asArray();var k={created_at:moment().format(),beacon_id:"B9407F30-F5F8-466E-AFF9-25556B57FE6D",action:0};b.fromTemplateUrl("templates/activity-action.html",{scope:a}).then(function(b){a.activityModal=b}),a.showActivityModal=function(){a.activityModal.show(),e.styleColor("black")},a.closeActivityModal=function(){a.activityModal.hide(),e.styleColor("white")},a.startRangingBeacons=function(b){b=b||{},h.startMonitoringForRegion(b).then(function(b){console.log(b,b.state),a.showActivityModal(),a.pendingAction=!0},function(a){console.log(a)})},a.coming=function(){a.pendingAction=!1,a.user.currently="Brace 305",k.action=1,f.add(k,"hgascoigne2"),a.closeActivityModal()},a.going=function(){a.pendingAction=!1,a.user.currently="Out",k.action=0,f.add(k,"hgascoigne2"),a.closeActivityModal()},a.disregard=function(){a.pendingAction=!1,a.closeActivityModal()}}]),angular.module("hyenaWelcomeApp").service("ActivityService",["$firebase","$q","AppFirebase",function(a,b,c){var d=c.getRef(),e={get:function(b){return b=b.trim(),a(d.child("/activities/"+b))},userActivities:function(b,c){c=c||20;var e=d.child("/users/"+b+"/activities");return a(e)},add:function(b,c){return a(d.child("/users/"+c+"/activities")).$push(b)},user:function(b){return a(d.child("users/"+b))}};return e}]),angular.module("hyenaWelcomeApp").service("ngEstimote",["$q",function(a){var b={startMonitoringForRegion:function(b){var c=a.defer();return estimote.beacons.startMonitoringForRegion({},function(a){c.resolve(a)},function(a){c.reject(a)}),c.promise},stopMonitoringForRegion:function(b){var c=a.defer();return estimote.beacons.stopMonitoringForRegion({},function(a){c.resolve(a)},function(a){c.reject(a)}),c.promise}};return b}]),angular.module("config",[]).constant("ENV",{name:"production",apiEndpoint:"http://api.yoursite.com/"});